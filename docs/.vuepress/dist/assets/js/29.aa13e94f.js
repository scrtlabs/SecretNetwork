(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{374:function(a,t,e){"use strict";e.r(t);var n=e(43),s=Object(n.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"upgrading-a-validator-or-a-full-node-from-v0-0-1-to-v0-0-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-a-validator-or-a-full-node-from-v0-0-1-to-v0-0-2"}},[a._v("#")]),a._v(" Upgrading a validator or a full node from v0.0.1 to v0.0.2")]),a._v(" "),e("p",[a._v("This upgrade is optional and should only save disk space for full nodes."),e("br"),a._v("\n⚠️ If you are upgrading a validator node please "),e("RouterLink",{attrs:{to:"/docs/validators-and-full-nodes/backup-a-validator.html"}},[a._v("make sure to back it up before you make any changes.")]),a._v("⚠️")],1),a._v(" "),e("p",[a._v("Because of current aggressive slashing parameters, validators need to make sure their node is down for less than 50 blocks (Around 4 minutes), otherwise you will be jailed for 10 minutes and slashed a bit.")]),a._v(" "),e("p",[a._v("Also, Because this upgrade is related to blockchain storage, to prevent data corruption and slashing, and after consulting with the cosmos-sdk team, we decided the safest way to do this upgrade is to spawn a new full node.")]),a._v(" "),e("h1",{attrs:{id:"validators"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#validators"}},[a._v("#")]),a._v(" Validators")]),a._v(" "),e("p",[a._v("Follow the "),e("RouterLink",{attrs:{to:"/docs/validators-and-full-nodes/migrate-a-validator.html"}},[a._v("How to migrate a validator to a new machine")]),a._v(" guide while installing v0.0.2 on the new machine.")],1),a._v(" "),e("h1",{attrs:{id:"full-nodes-that-are-not-validators"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#full-nodes-that-are-not-validators"}},[a._v("#")]),a._v(" Full nodes that are not validators")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("If you do care about downtime:")]),a._v(" "),e("p",[a._v("Follow the "),e("RouterLink",{attrs:{to:"/docs/validators-and-full-nodes/run-full-node-mainnet.html"}},[a._v("How to deploy a full node")]),a._v(" guide while installing v0.0.2 on the new machine.")],1),a._v(" "),e("p",[a._v("To check if the new full node finished catching-up:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# On the full node on the new machine:")]),a._v("\nenigmacli status "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" jq .sync_info\n")])])]),e("p",[a._v("("),e("code",[a._v("catching_up")]),a._v(" should equal "),e("code",[a._v("false")]),a._v(")")]),a._v(" "),e("p",[a._v("Then you can kill the old node.")])]),a._v(" "),e("li",[e("p",[a._v("If you don't care about downtime:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Stop the node")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl stop enigma-node\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Clean the data folder")]),a._v("\nenigmad unsafe-reset-all\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Download & install v0.0.2")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://github.com/enigmampc/SecretNetwork/releases/download/v0.0.2/enigmachain_0.0.2_amd64.deb\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg -i enigmachain_0.0.2_amd64.deb\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" enigma-node\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Start the full node")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start enigma-node\n")])])]),e("p",[a._v("Your new full node will now catch up.")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);